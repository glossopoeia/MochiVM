// Test the various numeric operations and capabilities of the VM.

BEGIN_TEST("Addition tests")

CONSTANT(NUMBER_VAL(1.2))
CONSTANT(NUMBER_VAL(3.4))
CONSTANT(NUMBER_VAL(5.6))

WRITE_INST(CONSTANT, 123)
WRITE_BYTE(0, 123)
WRITE_INST(CONSTANT, 123)
WRITE_BYTE(1, 123)
WRITE_INST(ADD, 123)

WRITE_INST(ABORT, 123)
WRITE_BYTE(0, 123)

VERIFY_FRAMES(0);
VERIFY_STACK(1);
VERIFY_NUMBER((1.2 + 3.4))

END_TEST();

BEGIN_TEST("Division tests")

CONSTANT(NUMBER_VAL(1.2))
CONSTANT(NUMBER_VAL(3.4))
CONSTANT(NUMBER_VAL(5.6))

WRITE_INST(CONSTANT, 123)
WRITE_BYTE(0, 123)
WRITE_INST(CONSTANT, 123)
WRITE_BYTE(1, 123)
WRITE_INST(ADD, 123)

WRITE_INST(CONSTANT, 123)
WRITE_BYTE(2, 123)
WRITE_INST(DIVIDE, 123)
WRITE_INST(NEGATE, 123)
WRITE_INST(ABORT, 123)
WRITE_BYTE(0, 123)

VERIFY_FRAMES(0);
VERIFY_STACK(1);
VERIFY_NUMBER((1.2 + 3.4)/5.6)

END_TEST()